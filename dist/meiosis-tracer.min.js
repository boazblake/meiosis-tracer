!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.meiosisTracer=t():e.meiosisTracer=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.rowsId="tracerRows",t.colsId="tracerCols",t.streamId=function(e){return"tracerStreamContainer_ "+e},t.modelId=function(e){return"tracerModel_"+e},t.sliderId=function(e){return"tracerSlider_"+e},t.stepBackId=function(e){return"tracerStepBack_"+e},t.stepForwardId=function(e){return"tracerStepForward_"+e},t.sliderValueId=function(e){return"tracerSliderValue_"+e},t.sendId=function(e){return"tracerSend_"+e}},function(e,t,n){"use strict";var r=n(2);e.exports=r.meiosisTracer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.meiosisTracer=void 0;var r=n(3),o=n(4);t.meiosisTracer=function(e){(0,r.trace)(e),(0,o.tracer)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.trace=function(e){var t=e.streams,n=void 0===t?[]:t,r=e.stringify,o=void 0===r?function(e){return JSON.stringify(e,null,4)}:r,d=e.parse,i=void 0===d?function(e){return JSON.parse(e)}:d;if(window&&window.__MEIOSIS_TRACER_GLOBAL_HOOK__){for(var a=[],u=!1,l=-1,s=[],c=[],v=0,p=n.length;v<p;v++)if(n[v].label)c.push(n[v].label),s.push(n[v]);else{var f="Stream "+v;c.push(f),s.push({stream:n[v],label:f})}s.forEach(function(e,t){e.stream.map(function(e){if(l!==t){var n={type:"MEIOSIS_STREAM_VALUE",index:t,value:o(e)};u?window.postMessage(n,"*"):a.push(n)}})}),window.addEventListener("message",function(e){if("MEIOSIS_TRACER_INIT"===e.data.type)window.postMessage({type:"MEIOSIS_STREAM_LABELS",value:c},"*"),u=!0,a.forEach(function(e){return window.postMessage(e,"*")}),a.length=0;else if("MEIOSIS_TRIGGER_STREAM_VALUE"===e.data.type){var t=e.data,n=t.index,r=t.value;l=n,s[n].stream(i(r)),l=-1}}),window.postMessage({type:"MEIOSIS_PING"},"*")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tracer=void 0;var r=n(5),o=n(6),d=n(7),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));window.__MEIOSIS_TRACER_GLOBAL_HOOK__=!0;t.tracer=function(e){var t=e.selector,n=void 0===t?"#tracer":t,a=e.rows,u=void 0===a?5:a,l=e.cols,s=void 0===l?40:l,c=document.querySelector(n);if(c){var v=[];window.addEventListener("message",function(e){if("MEIOSIS_STREAM_LABELS"===e.data.type){var t=e.data.value,n={onRowsColsChange:function(e,n){for(var r=0;r<t.length;r++){var o=document.getElementById(i.modelId(r));o.rows=e,o.cols=n}}},a=document.createElement("div");c.append(a),(0,d.settingsView)({element:a,listeners:n,rows:u,cols:s});for(var l=function(e){v.push({history:[],value:-1});var n={onSliderChange:function(t){var n=v[e],r=n.history[t];n.value=t,(0,o.updateView)({index:e,model:r,value:t})},onStepBack:function(){var t=v[e];t.value=t.value-1;var n=t.history[t.value];(0,o.updateView)({index:e,model:n,value:t.value})},onStepForward:function(){var t=v[e];t.value=t.value+1;var n=t.history[t.value];(0,o.updateView)({index:e,model:n,value:t.value})},onSend:function(t){window.postMessage({type:"MEIOSIS_TRIGGER_STREAM_VALUE",index:e,value:t},"*")}},d=document.createElement("div");c.append(d);var i=t[e];(0,r.streamView)({element:d,index:e,listeners:n,label:i,rows:u,cols:s})},p=0;p<t.length;p++)l(p)}else if("MEIOSIS_STREAM_VALUE"===e.data.type){p=e.data.index;var f=v[p],m=e.data.value;f.history.push(m),f.value=f.value+1,(0,o.updateView)({index:p,model:m,value:f.value,max:f.history.length-1})}}),window.postMessage({type:"MEIOSIS_TRACER_INIT"},"*")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamView=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.streamView=function(e){var t=e.element,n=e.index,o=e.listeners,d=e.label,i=void 0===d?"":d,a=e.rows,u=void 0===a?5:a,l=e.cols,s=void 0===l?40:l;t.innerHTML="<div id='"+r.streamId(n)+"' style='padding:8px;border:1px solid gray'><div>"+i+"</div><textarea id='"+r.modelId(n)+"' rows='"+u+"' cols='"+s+"'></textarea><div><input id='"+r.sliderId(n)+"' type='range' min='0' max='0' value='0' style='width: 100%' /><button id='"+r.stepBackId(n)+"'>&lt</button> <button id='"+r.stepForwardId(n)+"'>&gt</button> <span id='"+r.sliderValueId(n)+"'>-1</span> <button id='"+r.sendId(n)+"' style='position:absolute;right:8px'>Send</button></div></div>",document.getElementById(r.sliderId(n)).addEventListener("input",function(e){o.onSliderChange(parseInt(e.target.value,10))});var c=document.getElementById(r.stepBackId(n));c.addEventListener("click",function(e){o.onStepBack()}),c.disabled=!0;var v=document.getElementById(r.stepForwardId(n));v.addEventListener("click",function(e){o.onStepForward()}),v.disabled=!0,document.getElementById(r.sendId(n)).addEventListener("click",function(e){o.onSend(document.getElementById(r.modelId(n)).value)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateView=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.updateView=function(e){var t=e.index,n=e.model,o=e.value,d=e.max;document.getElementById(r.modelId(t)).value=n,null!=d&&(document.getElementById(r.sliderId(t)).max=d),document.getElementById(r.sliderId(t)).value=o,document.getElementById(r.sliderValueId(t)).innerHTML=o,document.getElementById(r.stepBackId(t)).disabled=o<=0,document.getElementById(r.stepForwardId(t)).disabled=o==document.getElementById(r.sliderId(t)).max}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsView=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.settingsView=function(e){var t=e.element,n=e.listeners,o=e.rows,d=void 0===o?5:o,i=e.cols,a=void 0===i?40:i;t.innerHTML="<div><span>Rows: </span><input id='"+r.rowsId+"' type='text' size='2' value='"+d+"'/><span> Cols: </span> <input id='"+r.colsId+"' type='text' size='2' value='"+a+"'/></div>",document.getElementById(r.rowsId).addEventListener("input",function(e){n.onRowsColsChange(parseInt(e.target.value,10),parseInt(document.getElementById(r.colsId).value,10))}),document.getElementById(r.colsId).addEventListener("input",function(e){n.onRowsColsChange(parseInt(document.getElementById(r.rowsId).value,10),parseInt(e.target.value,10))})}}])});
//# sourceMappingURL=meiosis-tracer.min.js.map